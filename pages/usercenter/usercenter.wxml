<!-- pages/usercenter/usercenter.wxml -->
<view class="usercenter-container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card" wx:if="{{isLoggedIn && userInfo}}">
    <view class="user-avatar-section">
      <image class="user-avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
    </view>
    <view class="user-info-section">
      <text class="user-name">{{userInfo.nickName}}</text>
      <text class="user-type">å·²ç™»å½•ç”¨æˆ·</text>
    </view>
  </view>

  <!-- ä½¿ç”¨ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-card" wx:if="{{usageStats}}">
    <view class="stats-title">ä»Šæ—¥ä½¿ç”¨ç»Ÿè®¡</view>

    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-label">å…è´¹å‰©ä½™</text>
        <text class="stat-value stat-value-free">{{usageStats.freeRemaining}}</text>
        <text class="stat-unit">æ¬¡</text>
      </view>

      <view class="stat-item">
        <text class="stat-label">å¹¿å‘Šè·å¾—</text>
        <text class="stat-value stat-value-ad">{{usageStats.adRemaining}}</text>
        <text class="stat-unit">æ¬¡</text>
      </view>

      <view class="stat-item">
        <text class="stat-label">å·²ä½¿ç”¨</text>
        <text class="stat-value stat-value-used">{{usageStats.totalUsed}}</text>
        <text class="stat-unit">æ¬¡</text>
      </view>

      <view class="stat-item">
        <text class="stat-label">æ€»å‰©ä½™</text>
        <text class="stat-value stat-value-total">{{usageStats.totalRemaining}}</text>
        <text class="stat-unit">æ¬¡</text>
      </view>
    </view>

    <view class="reset-info">
      <text class="reset-icon">â°</text>
      <text class="reset-text">{{usageStats.remainingTime}}</text>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-list">
    <view class="menu-item" bindtap="goToHistory">
      <text class="menu-icon">ğŸ“‹</text>
      <text class="menu-text">å†å²è®°å½•</text>
      <text class="menu-arrow">â€º</text>
    </view>

    <view class="menu-item" bindtap="goToSettings">
      <text class="menu-icon">âš™ï¸</text>
      <text class="menu-text">è®¾ç½®</text>
      <text class="menu-arrow">â€º</text>
    </view>

    <view class="menu-item" bindtap="showAbout">
      <text class="menu-icon">â„¹ï¸</text>
      <text class="menu-text">å…³äºæˆ‘ä»¬</text>
      <text class="menu-arrow">â€º</text>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½•æŒ‰é’® -->
  <view class="logout-section" wx:if="{{isLoggedIn}}">
    <button class="logout-btn" bindtap="handleLogout">
      é€€å‡ºç™»å½•
    </button>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-overlay" wx:if="{{loading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
</view>
